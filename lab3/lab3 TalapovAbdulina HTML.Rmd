---
title: "lb3"
author: "Талапов Н./Абдулина Л."

#Задание 1


#Используйте команду readLines для загрузки файла в текстовый вектор html.
```{r}
forbesData<-readLines("https://github.com/SergeyMirvoda/da2016/blob/master/data/forbes.htm", n=-1)
```
произвели выгрузку файлов

#Сколько строк в файле?
```{r}
length(forbesData)
```
в файле 8629 строк

#Сколько символов в файле?
```{r}
sum(nchar(forbesData))
```
в файле 768024 символов

#Откройте файл в текстовом редакторе. Найдите строки, содержащие данные о Билле Гейтсе и Ларри Эллисоне и запомните размер их дохода.
#Напишите шаблон регулярного выражения и используйте функцию grep, чтобы извлечь размер дохода из данных в векторе html. Удостоверьтесь, что полученный вектор номеров строк содержит содержит ровно 100 записей и ссылается на номера строк в котрых действительно есть информация о доходе, а не просто первый попавшийся текст.
```{r}
pattern <- "[$]\\d{,2}[,]?\\d{,2}?\\s[B]"
length(grep(pattern,forbesData))
```

#Напишите код, использовав регулярное выражение из п. 3, и функции regexp и regmatches, чтобы извлечь все данные о доходе. 
```{r}
regexpr(pattern,forbesData)
regmatches(forbesData, regexpr(pattern,forbesData))
length(regmatches(forbesData, regexpr(pattern,forbesData)))
```
получили данные о доходах, как и требовалось, 100 значений

#Самый большой доход должен быть доход Билла Гейтса, такой доход должен быть в списке один раз.
```{r}
regmatches(forbesData, regexpr(pattern,forbesData))[1]
length(regmatches(forbesData, regexpr(pattern,forbesData))["$72 B"])
```
получили доход $72 B, указанный в списке 1 раз

#В всписке должна быть цифра, которую мы запомнили для Ларри Эллисона, должно быть как минимум два значения, встречающихся несколько раз.
```{r}
length(regmatches(forbesData, regexpr(pattern,forbesData))["$41 B"])
length(unique(regmatches(forbesData, regexpr(pattern,forbesData))))
```
#Задание 2

#В данных доход представлен в формате "$42 B", что означает 42 ?? 10^9. Преобразуйте этот формат в числовой и сохраните в вектор worths.
```{r}
dohod<-regmatches(forbesData, regexpr(pattern,forbesData)) 
dohod<-sub(",",".",dohod)
dohod<-substr(dohod,2,nchar(dohod)-2)
worths<-as.numeric(dohod)*10**9
```

#Удостоверьтесь в следующем:
#worths является вектором и в нём сто занчений типа double.
```{r}
is.double(worths)
```
#Все элементы вектора worths больше 1 миллиарда.
```{r}
length(worths[worths>1*10**9]) 
```

#Самое большое число это доход Билла Гейтса.
```{r}
which.max(worths) 
```
#Используйте вектор worths , чтобы выяснить следующее:
#Какова медиана ста этих записей?
```{r}
median(worths)
```
#Средний доход?
```{r}
mean(worths) 
```
#Как много людей из этого списка имеют доход больше 5млрд., 10, 25?
```{r}
length(worths[worths>5*10**9]) 
length(worths[worths>10*10**9]) 
length(worths[worths>25*10**9]) 
```
5млрд=89, 10млрд=39, 25млрд=12

#Какой их общий доход?
```{r}
sum(worths)
```
#Какую долю от общего дохода, составляет пятёрка самых богатых.
```{r}
sum(worths[1:5])/sum(worths)
```
#Какую долю от общего дохода, составляют 20 самых богатых.
```{r}
sum(worths[1:20])/sum(worths) 
```
#В данных федерального резерва США найдите показатель дохода всех домохозяйств (Household net worth) в соответвующем году, какую долю общего дохода составляют 100 богатейших людей.
```{r}
sum(worths)/90196.1*10**9
```